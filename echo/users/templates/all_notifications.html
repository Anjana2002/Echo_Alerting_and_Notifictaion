{% extends "base.html" %}
{% block title %}All Notifications{% endblock %}

{% block content %}
<h1>All Notifications</h1>

<table border="1" cellpadding="10" cellspacing="0">
    <thead>
        <tr>
            <th>Title</th>
            <th>Message</th>
            <th>Severity</th>
            <th>Date</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for notif in notifications %}
        <tr {% if notif.is_read %}style="background:#f0f0f0;"{% endif %}>
            <td>{{ notif.alert.title }}</td>
            <td>{{ notif.alert.message }}</td>
            <td>{{ notif.alert.severity }}</td>
            <td>{{ notif.alert.start_time|date:"Y-m-d H:i" }}</td>
            <td>
                {% if not notif.is_read %}
                <form method="post" action="{% url 'mark_alert_as_read' notif.alert.id %}">
                    {% csrf_token %}
                    <button type="submit">Mark as Read</button>
                </form>
                {% else %}
                Read
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="5">No notifications found.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
