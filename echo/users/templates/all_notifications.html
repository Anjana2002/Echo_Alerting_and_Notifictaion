{% extends "base.html" %}

{% block title %}
All Notifications
{% endblock %}

{% block content %}
<div class="notifications-content">
  <div class="notifications-header">
    <h1>All Notifications</h1>
  </div>

  <div class="notifications-table-container">
    {% if notifications %}
    <table class="notifications-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Message</th>
          <th>Severity</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for notif in notifications %}
        <tr class="{% if notif.is_read %}read{% endif %}">
          <td><strong>{{ notif.alert.title }}</strong></td>
          <td>{{ notif.alert.message }}</td>
          <td>
            <span class="notification-severity {{ notif.alert.severity|lower }}">
              {{ notif.alert.severity }}
            </span>
          </td>
          <td>{{ notif.alert.start_time|date:"M d, Y H:i" }}</td>
          <td>
            <div class="notification-actions">
              {% if not notif.is_read %}
              <form method="post" action="{% url 'mark_alert_as_read' notif.alert.id %}">
                {% csrf_token %}
                <button type="submit" class="notification-btn mark-read">
                  âœ… Mark as Read
                </button>
              </form>
              {% else %}
              <span class="notification-status">âœ“ Read</span>
              {% endif %}
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="no-notifications">
      <p>ðŸ“­ No notifications found</p>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
